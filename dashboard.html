<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel de Usuario</title>
  <link rel="stylesheet" href="dashboard.css" />
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <main>
    <header>
      <h1>ðŸ‘‹ Bienvenido <span id="nombre-usuario"></span></h1>
      <button id="logout">Cerrar sesiÃ³n</button>
    </header>

    <section class="info">
      <h2>InformaciÃ³n del perfil</h2>
      <div class="datos">
        <p><strong>Usuario:</strong> <span id="usuario"></span></p>
        <p><strong>Correo:</strong> <span id="email"></span></p>
        <p><strong>PaÃ­s:</strong> <span id="pais"></span></p>
        <p><strong>Fecha de nacimiento:</strong> <span id="fecha"></span></p>
      </div>
    </section>
  </main>

  <script>
    // âš™ï¸ ConexiÃ³n Supabase
    const SUPABASE_URL = "https://banmupakbakpjzcawjrc.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbm11cGFrYmFrcGp6Y2F3anJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA4MTQ3NzgsImV4cCI6MjA3NjM5MDc3OH0.66kLmy82jDq4RyQ1vckZEMpl2KZx1TUm6xNuHFm1Dy8";
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // ðŸ§  Recuperar usuario de localStorage
    const usuario = JSON.parse(localStorage.getItem("usuarioActual"));

    if (!usuario) {
      alert("âš ï¸ No has iniciado sesiÃ³n.");
      window.location.href = "login.html";
    } else {
      // Mostrar datos del usuario
      document.getElementById("nombre-usuario").textContent = usuario.nombres || "Usuario";
      document.getElementById("usuario").textContent = usuario.usuario || "â€”";
      document.getElementById("email").textContent = usuario.email || "â€”";
      document.getElementById("pais").textContent = usuario.pais || "â€”";
      document.getElementById("fecha").textContent = usuario.fecha || "â€”";

      // ðŸ”¹ RedirecciÃ³n automÃ¡tica al index despuÃ©s de 3 segundos
      setTimeout(() => {
        window.location.href = "index.html";
      }, 3000);
    }

    // ðŸ”“ Cerrar sesiÃ³n
    document.getElementById("logout").addEventListener("click", () => {
      localStorage.removeItem("usuarioActual");
      window.location.href = "login.html";
    });
  </script>
</body>
</html>
